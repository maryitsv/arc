<?php


/**
 * Skeleton subclass for performing query and update operations on the 'tecnicooperativaaduccionimpulsionacueducto' table.
 *
 *
 *
 * This class was autogenerated by Propel 1.4.2 on:
 *
 * 07/30/10 12:26:14
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model
 */
class TecnicooperativaaduccionimpulsionacueductoPeer extends BaseTecnicooperativaaduccionimpulsionacueductoPeer {
	public static function crearCanal($topId, $tipoCanalId, $materialCanalId, $longitud, $diametro, $edad) {
		$criteria = new Criteria();
		$criteria->add(TecnicooperativaaduccionimpulsionacueductoPeer::TOAI_TOP_ID, $topId);
		$criteria->add(TecnicooperativaaduccionimpulsionacueductoPeer::TOAI_TIPO_CANAL_ID, $tipoCanalId);
		$criteria->add(TecnicooperativaaduccionimpulsionacueductoPeer::TOAI_MATERIAL_CANAL_ID, $materialCanalId);
		$canal = TecnicooperativaaduccionimpulsionacueductoPeer::doSelectOne($criteria);
		if(!$canal) {
			$canal = new Tecnicooperativaaduccionimpulsionacueducto();
			$canal->setToaiTopId($topId);
			$canal->setToaiTipoCanalId($tipoCanalId);
			$canal->setToaiMaterialCanalId($materialCanalId);
		}
		$canal->setToaiLongitud($longitud);
		$canal->setToaiDiametro($diametro);
		$canal->setToaiEdad($edad);
		$canal->save();
	}
	public static function eliminarCanales($topId, $tipoCanalId) {
		$criteria = new Criteria();
		$criteria->add(TecnicooperativaaduccionimpulsionacueductoPeer::TOAI_TOP_ID, $topId);
		$criteria->add(TecnicooperativaaduccionimpulsionacueductoPeer::TOAI_TIPO_CANAL_ID, $tipoCanalId);
		$canales = TecnicooperativaaduccionimpulsionacueductoPeer::doSelect($criteria);
		if(count($canales)>0) {
			foreach($canales as $canal) {
				$canal->delete();
			}
		}
	}
	public static function consultarCanalSiExiste($topId, $tipoCanalId, $materialId = null) {
		$criteria = new Criteria();
		$criteria->add(TecnicooperativaaduccionimpulsionacueductoPeer::TOAI_TOP_ID, $topId);
		$criteria->add(TecnicooperativaaduccionimpulsionacueductoPeer::TOAI_TIPO_CANAL_ID, $tipoCanalId);
		if($materialId) {
			$criteria->add(TecnicooperativaaduccionimpulsionacueductoPeer::TOAI_MATERIAL_CANAL_ID, $materialId);
		}

		return TecnicooperativaaduccionimpulsionacueductoPeer::doSelectOne($criteria);
	}
} // TecnicooperativaaduccionimpulsionacueductoPeer
